# ホッケ リプライシステム設計

> リプライによるエンゲージメント獲得の仕組み

---

## 概要

Phase 1（0-500フォロワー）の主要施策として、ターゲットアカウントのツイートにホッケのペルソナでリプライする。

- **方式:** 全自動（C方式）
- **実行環境:** OpenClaw（ローカル常駐）
- **頻度:** 1日1アカウントにつき1リプ。広く浅く。
- **初期リプ数:** 10件/日から開始。様子を見て段階的に増加。

---

## ターゲットアカウント

### カテゴリ

| カテゴリ | 狙い |
|---------|------|
| 猫系 | 親和性最高。猫好きからのフォロー |
| 脱力・ゆるい系 | ペルソナと合うコミュニティ |
| メンタルヘルス系 | 戦略上のターゲット層 |
| テック系 | 飼い主ネタの文脈で自然にリプできる |

### 発見方法

**A. キーワード検索（自動・メイン）**

X API検索でキーワードベースにツイートを取得し、投稿者をターゲット候補にする。

検索キーワード例:
- 猫系: `猫 かわいい`, `猫 写真`, `にゃんこ`
- 脱力系: `何もしたくない`, `布団から出たくない`, `やる気でない`
- メンタル系: `疲れた`, `しんどい`, `休みたい`
- テック系: `エンジニア 疲れた`, `コード 動かない`, `デプロイ`

**コスト最適化:**
- 検索は1日1-2回、少数キーワードに絞る
- 1回の検索で取得するツイート数を制限（10-20件）
- 発見したアカウントはリストに蓄積 → 以降は直接取得
- 目安: 1日20件取得 = $0.10/日 = **月$3程度**

**B. 手動追加（飼い主が協力）**

ターゲットリストに手動でアカウントを追加できる仕組みを用意する。

```json
// target_accounts.json に直接追加
{
  "username": "example_cat",
  "category": "猫系",
  "source": "manual",
  "added_at": "2026-02-17"
}
```

---

## コスト試算

### リプライ運用の月間コスト（X API）

| 操作 | 数量/日 | 単価 | 月額 |
|------|---------|------|------|
| ツイート検索（ターゲット発見） | 20件 | $0.005 | $3.00 |
| ターゲットの最新ツイート取得 | 10件 | $0.005 | $1.50 |
| リプライ投稿 | 10件 | $0.010 | $3.00 |
| **合計** | | | **$7.50** |

※ 通常投稿（1日2-4件）の分は別途: 月$1.20-$2.40

### LLMコスト（リプ生成）

1リプあたりの推定トークン: 入力2000（ペルソナ+元ツイート）、出力100（短いリプ）

| モデル | 1リプ | 10リプ/日 | 月額 |
|--------|-------|-----------|------|
| DeepSeek V3.2 | $0.0006 | $0.006 | $0.18 |
| Gemini 3 Flash | $0.0013 | $0.013 | $0.39 |

→ LLMコストはほぼ誤差。

### 月間合計見込み

| 項目 | 月額 |
|------|------|
| X API（リプライ運用） | ~$7.50 |
| X API（通常投稿） | ~$2.00 |
| LLM（リプ生成） | ~$0.20 |
| **合計** | **~$10** |

※ リプ数やターゲット発見頻度で調整可能

---

## 安全装置

### NGフィルタ

リプ対象から除外するキーワード:
- 政治: 選挙、政党名、政治家名
- 宗教: 宗教名、布教系ワード
- 炎上: 炎上、批判、差別系ワード
- センシティブ: 性的、暴力的コンテンツ
- 広告・スパム: PR、宣伝、アフィリエイト

### セルフチェック

リプ生成後、LLMに自己評価させる:
- ペルソナに合っているか
- 攻撃的でないか
- 意味が通じるか

→ NGなら破棄して次へ

### 頻度制限

- 1日のリプ上限: 初期10件 → 段階的に増加
- 同一アカウントへのリプ: 1日1回まで
- リプ間隔: 最低2-3分空ける
- 同一キーワードでの連続検索制限

### ログ

全リプを記録:
```json
{
  "timestamp": "2026-02-17T08:30:00+09:00",
  "target_user": "@example",
  "target_tweet_id": "123456",
  "target_tweet_text": "元ツイートの内容",
  "reply_text": "ホッケのリプ内容",
  "category": "猫系",
  "status": "posted"
}
```

### キルスイッチ

OpenClawから即停止できるコマンドを用意。
停止フラグファイル or 設定変更で全リプを即座に停止。

---

## フロー

```
[定期実行（OpenClaw cron or スケジュール）]
  │
  ├─ 1. ターゲット発見（低頻度: 1日1-2回）
  │    └─ キーワード検索 → 新規アカウントをリストに追加
  │
  └─ 2. リプライ実行（1日1回 or 数回に分散）
       ├─ ターゲットリストからアカウント選択（10件）
       ├─ 各アカウントの最新ツイート取得
       ├─ NGフィルタでスキップ判定
       ├─ LLMでリプ生成（PERSONA.md準拠）
       ├─ セルフチェック
       ├─ リプ投稿（間隔を空けて）
       └─ ログ記録
```

---

## ファイル構成（予定）

```
~/pjt/hokke_x/
├── reply_system/
│   ├── target_accounts.json    # ターゲットリスト（自動+手動）
│   ├── reply_log.json          # リプライログ
│   ├── ng_keywords.json        # NGキーワードリスト
│   ├── reply_engine.py         # メインスクリプト
│   └── config.json             # 設定（頻度、上限等）
```

---

## 未実装・今後決めること

- [ ] 具体的な検索キーワードの精査
- [ ] リプ生成のプロンプト設計
- [ ] OpenClawスキルとしての統合方法
- [ ] 効果測定の仕組み（フォロー獲得率の追跡）
- [ ] 月次予算の上限設定

---

*作成: 2026-02-17*
